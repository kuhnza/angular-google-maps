"use strict";angular.module("google.maps",[]).directive("gMap",["$window",function(a){return{restrict:"A",scope:{markerConfigs:"=markers",options:"=?",fitToMarkers:"=?"},link:function(b,c){function d(a,c){var d,j=new h.LatLngBounds;_.each(c,function(b,c){a[c]||f(c)}),_.each(a,function(a,c){if(_.isArray(b.markerConfigs)&&!_.has(a,"id"))throw"Markers must include an id property when passed in an array.";a.id=a.id||c,d=e(a),j.extend(d.getPosition())}),b.fitToMarkers&&g()>0&&i.fitBounds(j)}function e(a){var b=a.id;return j[b]?j[b].setOptions(a):j[b]=new h.Marker(a),j[b].setMap(i),j[b]}function f(a){j[a].setMap(null),delete j[a]}function g(){var a=0;return _.isArray(j)?a=j.length:_.isObject(j)&&(a=_.values(j).length),a}var h=a.google.maps,i=new h.Map(c[0],b.options),j={};b.markerConfigs=b.markerConfigs||{},b.fitToMarkers=!!b.fitToMarkers,d(),b.$watch("markerConfigs",d,!0)}}}]);